import{J as e,s as t,c as n,S as s,i as o,f as r,v as l,e as u,d as a,b as i,g as m,t as c,G as p,l as d,m as f,N as h,n as g,O as $,P as x,Q as v,x as b,h as C,D as w,H as y,C as I,I as P,p as z,K as E,w as k,y as N,z as B,R as S,E as L,F as M,T as q,U as A,V as H,q as F,a as W,u as j,j as T,k as V,L as _,M as D,W as R,X as U}from"./chunks/index.js";import{g as X,a as G,S as J}from"./chunks/Splitter.js";function K(e){return void 0!==e?.length?e:Array.from(e)}const O=[];function Q(e){l(e,"svelte-1yvuz9w",'@charset "UTF-8";.context-menu .menu-item > button.parent-menu-item-hovered{background-color:#5e5e5e !important}.context-menu.svelte-1yvuz9w.svelte-1yvuz9w{position:fixed;display:block;background-color:#444;border:1px solid #ccc;padding:3px;border-radius:2px;font-family:Arial, sans-serif}.context-menu.svelte-1yvuz9w .menu-item.svelte-1yvuz9w{position:relative}.context-menu.svelte-1yvuz9w .menu-item hr.svelte-1yvuz9w{margin:2px 0;border:none;border-top:1px solid #ccc}.context-menu.svelte-1yvuz9w .menu-item button.svelte-1yvuz9w{display:block;width:100%;text-align:left;padding:1px 5px;border-radius:1px;font-size:0.5em;color:#fff;background:none;border:none;cursor:pointer}.context-menu.svelte-1yvuz9w .menu-item button.svelte-1yvuz9w:hover{background-color:#5e5e5e}.context-menu.svelte-1yvuz9w .menu-item button.sub-menu-btn.svelte-1yvuz9w:after{content:">";float:right;padding-left:10px;padding-right:0}.context-menu.svelte-1yvuz9w .menu-item .sub-menu.svelte-1yvuz9w{position:absolute;display:none}')}function Y(e,t,n){const s=e.slice();return s[17]=t[n],s}function Z(e){let t,n,s;function o(e,t){return e[17].handler?ne:te}let r=o(e),l=r(e),u=e[17].subMenu&&se(e);return{c(){l.c(),t=b(),u&&u.c(),n=E()},m(e,o){l.m(e,o),m(e,t,o),u&&u.m(e,o),m(e,n,o),s=!0},p(e,s){r===(r=o(e))&&l?l.p(e,s):(l.d(1),l=r(e),l&&(l.c(),l.m(t.parentNode,t))),e[17].subMenu?u?(u.p(e,s),2&s&&c(u,1)):(u=se(e),u.c(),c(u,1),u.m(n.parentNode,n)):u&&(y(),d(u,1,1,(()=>{u=null})),p())},i(e){s||(c(u),s=!0)},o(e){d(u),s=!1},d(e){e&&(f(t),f(n)),l.d(e),u&&u.d(e)}}}function ee(t){let n;return{c(){n=u("hr"),a(n,"class","svelte-1yvuz9w")},m(e,t){m(e,n,t)},p:e,i:e,o:e,d(e){e&&f(n)}}}function te(e){let t,n,s,o,r=e[17].text+"";return{c(){t=u("button"),n=S(r),a(t,"class","sub-menu-btn svelte-1yvuz9w")},m(r,l){m(r,t,l),C(t,n),s||(o=w(t,"click",L(M(e[10]))),s=!0)},p(e,t){2&t&&r!==(r=e[17].text+"")&&q(n,r)},d(e){e&&f(t),s=!1,o()}}}function ne(e){let t,n,s,o,r=e[17].text+"";function l(){return e[11](e[17])}return{c(){t=u("button"),n=S(r),a(t,"class","svelte-1yvuz9w")},m(e,r){m(e,t,r),C(t,n),s||(o=w(t,"click",M(l)),s=!0)},p(t,s){e=t,2&s&&r!==(r=e[17].text+"")&&q(n,r)},d(e){e&&f(t),s=!1,o()}}}function se(e){let t,n,s;return n=new ae({props:{menuLevel:e[2]+1,menuItems:e[17].subMenu}}),n.$on("menuItemClicked",e[12]),{c(){t=u("div"),k(n.$$.fragment),a(t,"class","sub-menu svelte-1yvuz9w")},m(e,o){m(e,t,o),N(n,t,null),s=!0},p(e,t){const s={};4&t&&(s.menuLevel=e[2]+1),2&t&&(s.menuItems=e[17].subMenu),n.$set(s)},i(e){s||(c(n.$$.fragment,e),s=!0)},o(e){d(n.$$.fragment,e),s=!1},d(e){e&&f(t),B(n)}}}function oe(e){let t,n,s,o,r,l,i;const h=[ee,Z],g=[];function $(e,t){return e[17].divider?0:e[17].text?1:-1}return~(n=$(e))&&(s=g[n]=h[n](e)),{c(){t=u("div"),s&&s.c(),o=b(),a(t,"class","menu-item svelte-1yvuz9w")},m(s,u){m(s,t,u),~n&&g[n].m(t,null),C(t,o),r=!0,l||(i=[w(t,"mouseenter",e[6]),w(t,"mouseleave",e[7])],l=!0)},p(e,r){let l=n;n=$(e),n===l?~n&&g[n].p(e,r):(s&&(y(),d(g[l],1,1,(()=>{g[l]=null})),p()),~n?(s=g[n],s?s.p(e,r):(s=g[n]=h[n](e),s.c()),c(s,1),s.m(t,o)):s=null)},i(e){r||(c(s),r=!0)},o(e){d(s),r=!1},d(e){e&&f(t),~n&&g[n].d(),l=!1,I(i)}}}function re(e){let t,n,s=K(e[1]),o=[];for(let t=0;t<s.length;t+=1)o[t]=oe(Y(e,s,t));const r=e=>d(o[e],1,1,(()=>{o[e]=null}));return{c(){t=u("div");for(let e=0;e<o.length;e+=1)o[e].c();a(t,"class","context-menu svelte-1yvuz9w"),i(t,"left",`${e[0].x}px`),i(t,"top",`${e[0].y}px`)},m(s,r){m(s,t,r);for(let e=0;e<o.length;e+=1)o[e]&&o[e].m(t,null);e[13](t),n=!0},p(e,[n]){if(214&n){let l;for(s=K(e[1]),l=0;l<s.length;l+=1){const r=Y(e,s,l);o[l]?(o[l].p(r,n),c(o[l],1)):(o[l]=oe(r),o[l].c(),c(o[l],1),o[l].m(t,null))}for(y(),l=s.length;l<o.length;l+=1)r(l);p()}1&n&&i(t,"left",`${e[0].x}px`),1&n&&i(t,"top",`${e[0].y}px`)},i(e){if(!n){for(let e=0;e<s.length;e+=1)c(o[e]);n=!0}},o(e){o=o.filter(Boolean);for(let e=0;e<o.length;e+=1)d(o[e]);n=!1},d(n){n&&f(t),h(o,n),e[13](null)}}}function le(e,t){const n=t.querySelector("button");var s;s=e,"none"===window.getComputedStyle(s).display?n.classList.remove("parent-menu-item-hovered"):n.classList.add("parent-menu-item-hovered")}function ue(n,s,o){let r;const l=g();let{menuItems:u=[]}=s,{menuLevel:a=0}=s,{menuPos:i={x:0,y:0}}=s,{menuSize:m={width:0,height:0}}=s;const c=function(){let n;0===a?(n=function(n,s=e){let o;const r=new Set;function l(e){if(t(n,e)&&(n=e,o)){const e=!O.length;for(const e of r)e[1](),O.push(e,n);if(e){for(let e=0;e<O.length;e+=2)O[e][0](O[e+1]);O.length=0}}}function u(e){l(e(n))}return{set:l,update:u,subscribe:function(t,a=e){const i=[t,a];return r.add(i),1===r.size&&(o=s(l,u)||e),t(n),()=>{r.delete(i),0===r.size&&o&&(o(),o=null)}}}}({maxLevel:0,"level-0":{lastHoveredMenuItem:null}}),x("context",n)):(n=v("context"),n.update((e=>(a>e.maxLevel&&(e.maxLevel=a),e[`level-${a}`]={lastHoveredMenuItem:null},e))));return n}();let p;function d(e){if(a<=0||!p||!e)return;const t=p.parentElement,n=t.closest(".menu-item");if(n!==e["level-"+(a-1)].lastHoveredMenuItem)return t.style.display="none",void le(t,n);t.style.display="block",le(t,n),function(e,t){const n=p.offsetWidth,s=p.offsetHeight,r=e.closest(".context-menu"),l=r.offsetWidth,u=t.offsetWidth,a=(l-u)/2+2;let m=r.offsetLeft+r.offsetWidth-a,c=r.offsetTop+t.offsetTop;m+n>window.innerWidth&&(m=r.offsetLeft-n+a);c+s>window.innerHeight&&(c=window.innerHeight-s);m<0&&(m=0);c<0&&(c=0);o(0,i={x:m,y:c})}(t,n)}$(n,c,(e=>o(9,r=e)));return n.$$set=e=>{"menuItems"in e&&o(1,u=e.menuItems),"menuLevel"in e&&o(2,a=e.menuLevel),"menuPos"in e&&o(0,i=e.menuPos),"menuSize"in e&&o(8,m=e.menuSize)},n.$$.update=()=>{512&n.$$.dirty&&d(r),268&n.$$.dirty&&p&&(o(8,m={width:p.offsetWidth,height:p.offsetHeight}),console.log(a?"sub menu":"main menu",m),o(3,p.style.zIndex=1e3+a,p))},[i,u,a,p,l,c,function(e){c.update((t=>(t[`level-${a}`].lastHoveredMenuItem=e.currentTarget,t)))},function(e){c.update((e=>e))},m,r,function(e){P.call(this,n,e)},e=>l("menuItemClicked",e),function(e){P.call(this,n,e)},function(e){z[e?"unshift":"push"]((()=>{p=e,o(3,p),o(2,a),o(8,m)}))}]}class ae extends s{constructor(e){super(),o(this,e,ue,re,t,{menuItems:1,menuLevel:2,menuPos:0,menuSize:8},Q)}get menuItems(){return this.$$.ctx[1]}set menuItems(e){this.$$set({menuItems:e}),r()}get menuLevel(){return this.$$.ctx[2]}set menuLevel(e){this.$$set({menuLevel:e}),r()}get menuPos(){return this.$$.ctx[0]}set menuPos(e){this.$$set({menuPos:e}),r()}get menuSize(){return this.$$.ctx[8]}set menuSize(e){this.$$set({menuSize:e}),r()}}function ie(e){let t,n,s;function o(t){e[7](t)}let r={menuItems:e[0],menuPos:e[3]};return void 0!==e[2]&&(r.menuSize=e[2]),t=new ae({props:r}),z.push((()=>A(t,"menuSize",o))),t.$on("menuItemClicked",e[8]),{c(){k(t.$$.fragment)},m(e,n){N(t,e,n),s=!0},p(e,s){const o={};1&s&&(o.menuItems=e[0]),8&s&&(o.menuPos=e[3]),!n&&4&s&&(n=!0,o.menuSize=e[2],H((()=>n=!1))),t.$set(o)},i(e){s||(c(t.$$.fragment,e),s=!0)},o(e){d(t.$$.fragment,e),s=!1},d(e){B(t,e)}}}function me(e){let t,n,s,o,r=e[1]&&ie(e);return{c(){r&&r.c(),t=E()},m(l,u){r&&r.m(l,u),m(l,t,u),n=!0,s||(o=w(window,"click",e[4]),s=!0)},p(e,[n]){e[1]?r?(r.p(e,n),2&n&&c(r,1)):(r=ie(e),r.c(),c(r,1),r.m(t.parentNode,t)):r&&(y(),d(r,1,1,(()=>{r=null})),p())},i(e){n||(c(r),n=!0)},o(e){d(r),n=!1},d(e){e&&f(t),r&&r.d(e),s=!1,o()}}}let ce,pe;function de(e,t,n){let s,{menuItems:o=[]}=t,r=!1,l={x:0,y:0};async function u(){n(1,r=!1),await F()}return e.$$set=e=>{"menuItems"in e&&n(0,o=e.menuItems)},[o,r,s,l,u,()=>r,async function(e){e.preventDefault(),e.stopPropagation(),await u(),n(1,r=!0),await F();const t=e.target,o=t.getBoundingClientRect();let a=e.clientX,i=e.clientY;o.right-a<s.width&&(a-=s.width),o.bottom-i<s.height&&(i-=s.height),a=Math.max(a,o.left),i=Math.max(i,o.top),n(3,l={x:a,y:i}),await async function(e,t){e!==ce&&("function"==typeof pe&&await pe(),ce=e,pe=t)}(t,u)},function(e){s=e,n(2,s)},function(t){P.call(this,e,t)}]}n(ae,{menuItems:{},menuLevel:{},menuPos:{},menuSize:{}},[],[],!0);class fe extends s{constructor(e){super(),o(this,e,de,me,t,{menuItems:0,isContextMenuVisible:5,showContextMenu:6})}get menuItems(){return this.$$.ctx[0]}set menuItems(e){this.$$set({menuItems:e}),r()}get isContextMenuVisible(){return this.$$.ctx[5]}get showContextMenu(){return this.$$.ctx[6]}}function he(e){l(e,"svelte-q9hd3l",".floor-box.svelte-q9hd3l{margin:0;padding:0;width:100%;height:100%;border:none}.floor-box.dots.svelte-q9hd3l{background-color:#333;background-image:radial-gradient(#444 1px, transparent 1px), radial-gradient(#444 1px, transparent 1px);background-size:5px 5px;background-position:0 0, 2.5px 2.5px}.floor-box.honeycomb.svelte-q9hd3l{background:radial-gradient(circle at 0 0, #444 5%, transparent 5%) 0 0, radial-gradient(circle at 0 15px, #444 5%, transparent 5%) 0 7.5px, radial-gradient(circle at 15px 0, #444 5%, transparent 5%) 7.5px 0, radial-gradient(circle at 15px 15px, #444 5%, transparent 5%) 7.5px 7.5px;background-color:#333;background-size:15px 15px}.floor-box.checkerboard.svelte-q9hd3l{background:linear-gradient(45deg, #333 25%, transparent 25%) -50px 0, linear-gradient(45deg, #333 25%, transparent 25%) -50px 0, linear-gradient(45deg, transparent 75%, #333 75%) -50px 0, linear-gradient(45deg, transparent 75%, #333 75%) -50px 0;background-size:5px 5px;background-color:#222}.floor-box.squares.svelte-q9hd3l{background-color:#333;background-image:linear-gradient(45deg, #444 25%, transparent 25%), linear-gradient(45deg, #444 25%, transparent 25%);background-size:10px 10px;background-position:0 0, 5px 5px}.floor-box.stripes.svelte-q9hd3l{background:repeating-linear-gradient(0deg, #333, #333 1px, #444 1px, #444 5px)}")}function ge(e){let t,n,s,o;const r=[xe,$e],l=[];function u(e,t){return e[0].componentClass?0:e[0].customElementName?1:-1}return~(t=u(e))&&(n=l[t]=r[t](e)),{c(){n&&n.c(),s=E()},m(e,n){~t&&l[t].m(e,n),m(e,s,n),o=!0},p(e,o){let a=t;t=u(e),t===a?~t&&l[t].p(e,o):(n&&(y(),d(l[a],1,1,(()=>{l[a]=null})),p()),~t?(n=l[t],n?n.p(e,o):(n=l[t]=r[t](e),n.c()),c(n,1),n.m(s.parentNode,s)):n=null)},i(e){o||(c(n),o=!0)},o(e){d(n),o=!1},d(e){e&&f(s),~t&&l[t].d(e)}}}function $e(n){let s,o=n[0].customElementName,r=n[0].customElementName&&ve(n);return{c(){r&&r.c(),s=E()},m(e,t){r&&r.m(e,t),m(e,s,t)},p(e,n){e[0].customElementName?o?t(o,e[0].customElementName)?(r.d(1),r=ve(e),o=e[0].customElementName,r.c(),r.m(s.parentNode,s)):r.p(e,n):(r=ve(e),o=e[0].customElementName,r.c(),r.m(s.parentNode,s)):o&&(r.d(1),r=null,o=e[0].customElementName)},i:e,o:e,d(e){e&&f(s),r&&r.d(e)}}}function xe(e){let t,n,s;const o=[e[0].props];var r=e[0].componentClass;function l(e,t){let n={};for(let e=0;e<o.length;e+=1)n=D(n,o[e]);return void 0!==t&&1&t&&(n=D(n,X(o,[G(e[0].props)]))),{props:n}}return r&&(t=_(r,l(e))),{c(){t&&k(t.$$.fragment),n=E()},m(e,o){t&&N(t,e,o),m(e,n,o),s=!0},p(e,s){if(1&s&&r!==(r=e[0].componentClass)){if(t){y();const e=t;d(e.$$.fragment,1,0,(()=>{B(e,1)})),p()}r?(t=_(r,l(e,s)),k(t.$$.fragment),c(t.$$.fragment,1),N(t,n.parentNode,n)):t=null}else if(r){const n=1&s?X(o,[G(e[0].props)]):{};t.$set(n)}},i(e){s||(t&&c(t.$$.fragment,e),s=!0)},o(e){t&&d(t.$$.fragment,e),s=!1},d(e){e&&f(n),t&&B(t,e)}}}function ve(e){let t,n=[e[0].props],s={};for(let e=0;e<n.length;e+=1)s=D(s,n[e]);return{c(){t=u(e[0].customElementName),R(e[0].customElementName)(t,s),U(t,"svelte-q9hd3l",!0)},m(e,n){m(e,t,n)},p(e,o){R(e[0].customElementName)(t,s=X(n,[1&o&&e[0].props])),U(t,"svelte-q9hd3l",!0)},d(e){e&&f(t)}}}function be(e){let t,n,s,o,r,l,i,h,g=e[0]&&ge(e);const $=e[8].default,x=W($,e,e[7],null);let v={menuItems:e[2]};return r=new fe({props:v}),e[10](r),r.$on("menuItemClicked",e[4]),{c(){t=u("div"),g&&g.c(),n=b(),x&&x.c(),o=b(),k(r.$$.fragment),a(t,"class",s="floor-box "+e[1]+" svelte-q9hd3l")},m(s,u){m(s,t,u),g&&g.m(t,null),C(t,n),x&&x.m(t,null),m(s,o,u),N(r,s,u),l=!0,i||(h=w(t,"contextmenu",e[9]),i=!0)},p(e,[o]){e[0]?g?(g.p(e,o),1&o&&c(g,1)):(g=ge(e),g.c(),c(g,1),g.m(t,n)):g&&(y(),d(g,1,1,(()=>{g=null})),p()),x&&x.p&&(!l||128&o)&&j(x,$,e,e[7],l?V($,e[7],o,null):T(e[7]),null),(!l||2&o&&s!==(s="floor-box "+e[1]+" svelte-q9hd3l"))&&a(t,"class",s);const u={};4&o&&(u.menuItems=e[2]),r.$set(u)},i(e){l||(c(g),c(x,e),c(r.$$.fragment,e),l=!0)},o(e){d(g),d(x,e),d(r.$$.fragment,e),l=!1},d(n){n&&(f(t),f(o)),g&&g.d(),x&&x.d(n),e[10](null),B(r,n),i=!1,h()}}}function Ce(e,t,n){let{$$slots:s={},$$scope:o}=t,{menuItems:r=[]}=t,{childComponentInfo:l=null}=t,{pattern:u="honeycomb"}=t;let a;return e.$$set=e=>{"menuItems"in e&&n(2,r=e.menuItems),"childComponentInfo"in e&&n(0,l=e.childComponentInfo),"pattern"in e&&n(1,u=e.pattern),"$$scope"in e&&n(7,o=e.$$scope)},[l,u,r,a,function(e){const t=(0,e.detail.handler)();n(0,l=t)},()=>["honeycomb","dots","checkerboard","squares","stripes"],e=>n(1,u=e),o,s,e=>a.showContextMenu(e),function(e){z[e?"unshift":"push"]((()=>{a=e,n(3,a)}))}]}n(fe,{menuItems:{}},[],["isContextMenuVisible","showContextMenu"],!0);class we extends s{constructor(e){super(),o(this,e,Ce,be,t,{menuItems:2,childComponentInfo:0,pattern:1,getAvailableFloorPatterns:5,setFloorPattern:6},he)}get menuItems(){return this.$$.ctx[2]}set menuItems(e){this.$$set({menuItems:e}),r()}get childComponentInfo(){return this.$$.ctx[0]}set childComponentInfo(e){this.$$set({childComponentInfo:e}),r()}get pattern(){return this.$$.ctx[1]}set pattern(e){this.$$set({pattern:e}),r()}get getAvailableFloorPatterns(){return this.$$.ctx[5]}get setFloorPattern(){return this.$$.ctx[6]}}n(we,{menuItems:{},childComponentInfo:{},pattern:{}},["default"],["getAvailableFloorPatterns","setFloorPattern"],!0);function ye(e,t,n){let{customElementConfigBasePath:s}=t;return e.$$set=e=>{"customElementConfigBasePath"in e&&n(0,s=e.customElementConfigBasePath)},[s,function(e){return[{customElementName:"s-splitter",componentClass:J,description:"Horizontal Splitter",props:{orientation:"horizontal",component_0:{component:we,props:{menuItems:e}},component_1:{component:we,props:{menuItems:e}}}},{customElementName:"s-splitter",componentClass:J,description:"Vertical Splitter",props:{orientation:"vertical",component_0:{component:we,props:{menuItems:e}},component_1:{component:we,props:{menuItems:e}}}}]},async function(){const e=await fetch(`${s}/s-custom-elements.json`);return[...await e.json()]}]}class Ie extends s{constructor(e){super(),o(this,e,ye,null,t,{customElementConfigBasePath:0,getAvailableCustomContainers:1,getAvailableCustomElements:2})}get customElementConfigBasePath(){return this.$$.ctx[0]}set customElementConfigBasePath(e){this.$$set({customElementConfigBasePath:e}),r()}get getAvailableCustomContainers(){return this.$$.ctx[1]}get getAvailableCustomElements(){return this.$$.ctx[2]}}function Pe(e){let t,n,s,o,r={customElementConfigBasePath:e[0]};return t=new Ie({props:r}),e[4](t),s=new we({props:{menuItems:e[2]}}),{c(){k(t.$$.fragment),n=b(),k(s.$$.fragment)},m(e,r){N(t,e,r),m(e,n,r),N(s,e,r),o=!0},p(e,[n]){const s={};1&n&&(s.customElementConfigBasePath=e[0]),t.$set(s)},i(e){o||(c(t.$$.fragment,e),c(s.$$.fragment,e),o=!0)},o(e){d(t.$$.fragment,e),d(s.$$.fragment,e),o=!1},d(o){o&&f(n),e[4](null),B(t,o),B(s,o)}}}function ze(e,t,n){let s,{compProps:o={}}=t,{customElementConfigBasePath:r}=t,l=[];return e.$$set=e=>{"compProps"in e&&n(3,o=e.compProps),"customElementConfigBasePath"in e&&n(0,r=e.customElementConfigBasePath)},e.$$.update=()=>{if(10&e.$$.dirty&&s){const e={divider:{style:""}},t=s.getAvailableCustomContainers(l);s.getAvailableCustomElements().then((n=>{[...t,e,...n].forEach((e=>{if(e.divider)l.push(e);else{let t=e.props||{};const n=e.componentClass?e.componentClass.name:null;n&&o[n]?t={...t,...o[n]}:e.componentName&&o[e.componentName]&&(t={...t,...o[e.componentName]}),l.push({text:e.description,handler:()=>({customElementName:e.customElementName,componentClass:e.componentClass,props:t})})}}))}))}},[r,s,l,o,function(e){z[e?"unshift":"push"]((()=>{s=e,n(1,s)}))}]}n(Ie,{customElementConfigBasePath:{}},[],["getAvailableCustomContainers","getAvailableCustomElements"],!0);class Ee extends s{constructor(e){super(),o(this,e,ze,Pe,t,{compProps:3,customElementConfigBasePath:0})}get compProps(){return this.$$.ctx[3]}set compProps(e){this.$$set({compProps:e}),r()}get customElementConfigBasePath(){return this.$$.ctx[0]}set customElementConfigBasePath(e){this.$$set({customElementConfigBasePath:e}),r()}}customElements.define("s-comp-box",n(Ee,{compProps:{},customElementConfigBasePath:{}},[],[],!0));export{Ee as default};
//# sourceMappingURL=SCompBox.custom.js.map
