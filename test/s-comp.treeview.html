<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>s-comp Tests</title>

    <link rel="stylesheet" href="/build/dev/default/s-comp.bundle.css">

    <style>
        #container {
            width: 100%;
            height: 100vh;
        }
    </style>
</head>

<body>
    <div id="container"></div>

    <script type="module">
        import Splitter from '/build/dev/default/Splitter.js';
        import TreeView from '/build/dev/default/TreeView.js';
        import WebView from '/build/dev/default/WebView.js';

        fetch('./s-comp.treeview.node-data.json')
            .then(response => response.json())
            .then(nodeData => {
                const splitter = new Splitter({
                    target: document.querySelector('#container'),
                    props: {
                        orientation: 'horizontal',
                        content_panel_0_length: '25%',

                        component_0: {
                            component: TreeView,
                            props: {
                                data: nodeData
                            }
                        },

                        component_1: {
                            component: WebView,
                            props: {
                                url: 'about:blank'
                            }
                        }
                    }
                });

                splitter.$on('treeNodeSelected', (event) => {
                    const bubble = event.detail.bubble;
                    const detail = bubble.forwardingDetail;
                    const webView = bubble.detail.component_1
                    webView.url = detail.data;
                });

                window.addEventListener("beforeunload", () => splitter?.$destroy());
            });
    </script>
</body>

</html>